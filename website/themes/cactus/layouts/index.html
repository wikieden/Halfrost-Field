{{ define "main" }}
  <section id="writing">
    <div id="archive">
      {{ range (sort .Pages "Date" "desc") }}
        {{ $pageYear := (.Date.Format "2006") }}
        {{ if (ne $pageYear ($.Scratch.Get "year")) }}
        {{ $.Scratch.Set "year" $pageYear }}
        <h2>{{ $pageYear }}</h2>
        {{ end }}
        <ul class="post-list">
          <li class="post-item">
            <div class="meta">
              <time datetime="{{ time .Date }}" itemprop="datePublished">{{ .Date.Format (.Site.Params.dateFormat | default "2006-01-02") }}</time>
            </div>
            <span>    
              <a class="" href="{{ .Permalink }}">{{ if .Title }} {{ .Title }} {{ else }} Untitled {{ end }}</a>
            </span>
          </li>
        </ul>
      {{ end }}
    </div>
  </section>
{{ end }}